## 1. JPEG

### 1.1. Общая информация о файле

- Начинается с байт ff d8 ff e0
- MIME: image/jpeg
- Теги начинаются с ff потом байт с идентификатором тега, после 2 длины тега (с учётом этих 2 байт)

### 1.2. Наиболее частые тэги и их структура

#### 1.2.1. APP0(JFIF)

Структура побайтово:
- байты тега: ff e0
- длина тега (2 байта)
- слово jfif\0(5 байт)
- 2 байта, описывающие версию jfif (если 00 01, то 1.01; если 00 02, то 1.02 и т.д.)
- 1 байт, описывающий единицы измерения плотности пикселей
	- 00 - отсутствует информация
	- 01 - пиксели на дюйм
	- 02 - пиксели на сантиметр
- 2 байта  - горизонтальная плотность пикселей
- 2 байта - вертикальная плотность пикселей
- 1 байт - ширина миниатюры (может отсутствовать)
- 1 байт - высота миниатюры (может отсутствовать)

#### 1.2.2. APP1(EXIF)

Структуры побайтово:
- байты тега: ff e1
- длина тега (2 байта)
- слово exif\0\0(6 байт)
Начало tiff-структуры
- тип tiff 2 байта (4d 4d - Big-endian, 49 49 - Little-endian)
- теги tiff:
	Общая структура:
	- 2 байта - id тега
	- 2 байта - формат тега
	- 4 байта - количество компонентов
	- 4 байта - смещение от начала tiff
Наиболее частые теги tiff:
 - Make (производитель камеры)
	 - Tag Id - 01 0f
	 - Формат данных - 00 02 (ASCII)
	 - количество компонентов=длина строки
- Model (модель камеры)
	 - Tag Id - 01 10
	 - Формат данных - 00 02 (ASCII)
	 - количество компонентов=длина строки
- ExposureTime (Время экспозиции)
	 - Tag Id - 82 9a
	 - Формат данных - 00 05 (Rational - дробное число, 8 байт, 4 байта - числитель, 4 байта - знаменатель)
	 - количество компонентов=количество чисел
- FNumber (Апертура)
	 - Tag Id - 82 9d
	 - Формат данных - 00 05 (Rational - дробное число, 8 байт, 4 байта - числитель, 4 байта - знаменатель)
	 - количество компонентов=количество чисел
- ISOSpeedRatings (ISO чувствительность)
	 - Tag Id - 82 9d
	 - Формат данных - 00 03 (Short - 2 байта, число вместо смещения)
	 - количество компонентов=длина строки
- UserComment (Пользовательский комментарий)
	 - Tag Id - 92 86
	 - Формат данных - 00 07 (Неинтерпретируемые данные)
	 - количество компонентов=длина строки
	 - особенность: сначала идёт 8 байт с указанием формата строки например:
		 - ASCII\0\0\0
		 - UNICODE\0
- GPSLatitude (Широта)
	 - Tag Id - 00 02
	 - Формат данных - 00 05 (Rational - дробное число, 8 байт, 4 байта - числитель, 4 байта - знаменатель)
	 - количество компонентов=количсетво чисел(обычно 3)
- GPSLongitude (долгота)
	 - Tag Id - 00 04
	 - Формат данных - 00 05 (Rational - дробное число, 8 байт, 4 байта - числитель, 4 байта - знаменатель)
	 - количество компонентов=количсетво чисел(обычно 3)
- GPSLatitudeRef (Широта северная или южная(4e/53))
	- Tag Id - 00 01
	 - Формат данных - 00 02 / 00 03 (ASCII/Short)
- GPSLongitudeeRef (Долгота западная или восточная(57/45))
	- Tag Id - 00 01
	 - Формат данных - 00 02 / 00 03 (ASCII/Short)
	
- DateTime (Дата и время)
	 - Tag Id - 01 32
	 - Формат данных - 00 02 (ASCII)
	 - количество компонентов=длина строки
- ImageDescription(Описание изображения)
	- Tag Id - 01 0e
	- Формат данных - 00 02 (ASCII)
	- количество компонентов=длина строки
Форматы данных в TIFF-тегах:
 - 1 - байт
 - 2 - ASCII строка
 - 3 - short(2 байтовое число)
 - 4 - long(4 байтовое число)
 - 5 - rational(4 байта числитель, 4 байта знаменатель)
 - 6 - sbyte(знаковый байт)
 - 7 - undefined(неопределённый массив байт)
 - 8 - SSHORT(знаковое 16 битное число)
 - 9 - SLONG(знаковое 32 битное число)
 - 10 - SRATIONAL(4 байта числитель знаковый, 4 байта знаменатель знаковый)
 - 11 - FLOAT(32 битное число с плавающей точкой)
 - 12 - DOUBLE(64 битное число с плавающей точкой)

#### 1.2.3. Комментарий
Структура:
- ff fe - байт идентификатор
- 2 байта длина
- текст
#### 1.2.4. Тип маркера
Структура:
 - ff c0/c1/c2/c3 - SOF0,1,2,3 (0 - Baseline DCT; 1 - Extended Sequential DCT; 2 - Progressive DCT; 3 - Lossless)
 - 2 байта - длина
 - 1 байт - точность в битах на компонент
 - 2 байта - ширина изображения
 - 2 байта - высота изображения

### 1.3. Изменяемые поля
